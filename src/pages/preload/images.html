<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <link rel="icon" type="image/svg+xml" href="/vite.svg" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>TerraHQ.com</title>
    </head>
    <body>
        <div class="f--container">
            <div class="f--row">
                <div class="f--col-12">
                    <h2 class="f--font-a f--sp-a f--mt-3">
                        Helpers <span class="f--font-c">By Terra</span>
                    </h2>
  
                </div>
            </div> 
            <div class="f--row">
                <div class="f--col-12">
                    <hr/>
                </div>
            </div>  
            <div class="f--row">
                <div class="f--col-6">
                    <h3 class="f--font-d f--sp-b">
                        Images Example Simple
                    </h3>
                </div>
                <div class="f--col-6" style="text-align: right;">
                   <a href="/">Back</a>
                </div>
            </div>    
            
            <div class="f--row">
                <div class="f--col-12">
                    <img class="js--image" src="https://www.w3schools.com/html/pic_trulli.jpg" alt="">
                </div>
            </div>

            <div class="f--row">
                <div class="f--col-12">
                    <hr/>
                </div>
            </div>  

            <div class="f--row">
                <div class="f--col-6">
                    <h3 class="f--font-d f--sp-b">
                        Images as group Simple
                    </h3>
                </div>
            </div>    

            <div class="f--row">
                <div class="f--col-12">
                    <div class="js--gallery">
                        <img  src="http://placeholder.terrahq.com/headshot.webp" alt="">
                        <img  src="http://placeholder.terrahq.com/icon.webp" alt="">
                        
                    </div>
                </div>
            </div>

            <div class="f--row">
                <div class="f--col-12">
                    <hr/>
                </div>
            </div>  

            <div class="f--row">
                <div class="f--col-6">
                    <h3 class="f--font-d f--sp-b">
                        Images as sequence
                    </h3>
                </div>
            </div>    

            <div class="f--row">
                <div class="f--col-12">
                        <img class="js--lazy-image" src="http://placeholder.terrahq.com/headshot.webp" alt="">
                        <img class="js--lazy-image" src="http://placeholder.terrahq.com/icon.webp" alt="">
                        
                </div>
            </div>
            

        </div>
        
        
  
        <script type="module">
            import "@scss/index.scss";
            import {preloadImages} from "@js/preloadImages/index.js";

            (async () => {
                try {
                    await preloadImages({
                        selector: document.querySelectorAll('.js--image'), 
                        callback: () => {
                            console.log('All images loaded');
                        },
                        debug: true
                    });
                } catch (error) {
                    console.error('Error:', error);
                }
            })();

            (async () => {
            try {
                const gallery = document.querySelector(".js--gallery");
                await preloadImages({
                selector: gallery,
                debug: true,
                callback: () => console.log("Gallery images loaded"),
                });
            } catch (err) {
                console.error("Preload error:", err);
            }
            })();

            const sections = document.querySelectorAll(".js--lazy-image");

            (async () => {
            for (const section of sections) {
                await preloadImages({ selector: section });
                // haz algo cuando ese contenedor termina
                section.classList.add("is-loaded");
                console.log("Loaded section:", section);
            }
            })()
            .then(() => {
            // cuando terminaron TODOS los contenedores
            console.log("âœ… Todas las secciones listas. Arranco animaciones o lo que sigue...");
            // startAnimations();
            })
            .catch((err) => {
            console.error("Preload error:", err);
            });

        </script>
    </body>
</html>
